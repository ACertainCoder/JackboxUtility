app: jackbox_patcher

version: ${VERSION}

ingredients:
  dist: jammy
  sources: 
    - deb http://archive.ubuntu.com/ubuntu/ jammy main restricted universe multiverse
  packages:
    - libmpv-dev
    - mpv
  script:
    - mkdir app_data
    - cp -r ../../../../jackbox_patcher/build/linux/x64/release/bundle/ ./app_data/
    - cp -r ../../../../jackbox_patcher/assets/logo.png ./
    - chmod u+x ./app_data/bundle/JackboxUtility


script:
  - mv ../app_data/bundle/* ./usr/bin
  - cat > JackboxUtility.desktop <<EOF
  - [Desktop Entry]
  - Type=Application
  - Name=JackboxUtility
  - Icon=logo
  - Exec=./JackboxUtility
  - Categories=GNOME;GTK;Network;WebBrowser;
  - MimeType=text/html;text/xml;application/xhtml+xml;
  - StartupNotify=true
  - EOF
  - cp ../logo.png ./